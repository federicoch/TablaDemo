

<p-card header="Simple Card" class="m-5" style="margin: 25px;">
    <p class="m-0">
        Simple demostracion de como puede verse agrupadas las distintas solicitudes.
        Dependiendo es estado, ser√°n las acciones disponibles.
        De esta forma en una sola ventana pueden verse y aplicarse distintos filtros( no demostrado.)
    </p>
</p-card>
<div class="card m-5">
  <p-table
    [value]="customers"
    sortField="representative.name"
    sortMode="single"
    dataKey="representative.name"
    rowGroupMode="subheader"
    groupRowsBy="representative.name"
    [tableStyle]="{'min-width': '70rem'}"
  >
    <ng-template #header>
      <tr>
        <th style="width: 20%">Solicitud</th>
        <th style="width: 20%">Endoso</th>
        <th style="width: 20%">Vigencia Desde</th>
        <th style="width: 20%">Vigencia Hasta</th>
        <th style="width: 20%">Estado</th>
        <th style="min-width: 12rem">Acciones</th>
      </tr>
    </ng-template>
    <ng-template
      #groupheader
      let-customer
      let-rowIndex="rowIndex"
      let-expanded="expanded"
    >
      <tr>
        <td colspan="6">
          <button
            type="button"
            pButton
            pRipple
            [pRowToggler]="customer"
            text
            rounded
            plain
            class="mr-2"
            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
          ></button>
          <p-tag
          [value]="customer.representative.name"
          [severity]="getSeverity(customer.status)"
        />
        </td>
      </tr>
    </ng-template>
    <ng-template #groupfooter let-customer>
      <tr class="p-rowgroup-footer">
        <td colspan="5" style="text-align: right">Total</td>
        <td>{{calculateCustomerTotal(customer.representative.name)}}</td>
      </tr>
    </ng-template>
    <ng-template #expandedrow let-customer>
      <tr>
        <td>{{customer.name}}</td>
        <td>
          <div class="flex items-center gap-2">
            <img
              src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
              [class]="'flag flag-' + customer.country.code"
              style="width: 20px"
            />
            <span>{{ customer.country.name }}</span>
          </div>
        </td>
        <td>{{customer.company}}</td>
        <td>{{customer.company}}</td>
        <td>
          <p-tag
            [value]="customer.status"
            [severity]="getSeverity(customer.status)"
          />
        </td>
        <td> <p-button icon="pi pi-pencil" class="mr-2" [rounded]="true" [outlined]="true"/>
            <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true"  />
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
